# State Duma App

## Описание

**State Duma App** — это десктопное приложение, разработанное для автоматизации учета информации о деятельности городской думы. Приложение позволяет:
- Вводить и редактировать данные о членах думы, организаторах, комиссиях и заседаниях.
- Формировать аналитические отчеты, такие как состав комиссий по направлениям, статистика заседаний по месяцам и поиск членов думы по стажу или возрасту.
- Обеспечивать соблюдение бизнес-правил (например, стаж председателей не менее 7 лет, уникальность назначения председателей).

Приложение разработано в рамках курсовой работы по дисциплине «Базы и хранилища данных» (Челябинский государственный университет, 2023).

## Технологический стек

- **Backend**: Rust (с использованием библиотеки `sqlx` для работы с базой данных).
- **Frontend**: HTML, CSS (Tailwind CSS), JavaScript.
- **Фреймворк**: Tauri (для создания кроссплатформенного десктопного приложения).
- **СУБД**: PostgreSQL (для хранения данных о членах думы, комиссиях, заседаниях и организаторах).
- **Инструменты**: RustRover (IDE), Database Tools and SQL (плагин для работы с БД).

## Требования

- **Операционная система**: Windows, Linux или macOS.
- **Rust**: Установленный компилятор Rust (рекомендуется последняя стабильная версия, см. [rustup.rs](https://rustup.rs/)).
- **Node.js**: Для работы с Tauri и фронтендом (версия 16 или выше).
- **PostgreSQL**: Установленный сервер PostgreSQL (версия 13 или выше).
- **Git**: Для клонирования репозитория.

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone https://github.com/Savinykh-Sergey/state_duma_app.git
cd state_duma_app
```

### 2. Настройка базы данных
1. Убедитесь, что PostgreSQL установлен и запущен.
2. Создайте базу данных и выполните SQL-скрипт для создания таблиц и триггеров:
   ```bash
   psql -U postgres -d state_duma -f sql/create_tables.sql
   ```
   Скрипт `create_tables.sql` находится в папке `sql/` и содержит команды для создания таблиц `members`, `organizers`, `commissions`, `meetings`, `commission_members`, а также триггеры для бизнес-правил.
3. (Опционально) Заполните базу тестовыми данными из `sql/insert_data.sql`:
   ```bash
   psql -U postgres -d state_duma -f sql/insert_data.sql
   ```

### 3. Установка зависимостей
1. Установите зависимости для Rust:
   ```bash
   cargo install
   ```
2. Установите зависимости для фронтенда:
   ```bash
   npm install
   ```

### 4. Настройка окружения
- Создайте файл `.env` в корне проекта и укажите параметры подключения к PostgreSQL:
  ```env
  DATABASE_URL=postgres://username:password@localhost:5432/state_duma
  ```
  Замените `username`, `password` и `state_duma` на ваши данные.

### 5. Запуск приложения
Запустите приложение в режиме разработки:
```bash
cargo tauri dev
```
Это откроет окно приложения с интерфейсом, реализованным на HTML/CSS/JavaScript, и позволит взаимодействовать с базой данных.

## Сборка приложения
Для создания исполняемого файла выполните следующие шаги:

1. Убедитесь, что все зависимости установлены (см. раздел «Установка и запуск»).
2. Скомпилируйте и соберите приложение:
   ```bash
   cargo tauri build
   ```
3. Исполняемый файл будет создан в папке `target/release/bundle` (для Windows — `.exe`, для Linux — `.AppImage` или исполняемый файл, для macOS — `.dmg`).
4. Для запуска собранного приложения:
    - На Windows: запустите `.exe` файл.
    - На Linux: выполните `chmod +x <имя_файла>.AppImage` и запустите `./<имя_файла>.AppImage`.
    - На macOS: откройте `.dmg` и следуйте инструкциям установщика.

## Структура репозитория
- `src-tauri/`: Код на Rust (бэкенд, логика взаимодействия с БД).
- `src/`: Фронтенд (HTML, CSS с Tailwind, JavaScript).
- `sql/`: SQL-скрипты для создания таблиц (`create_tables.sql`) и заполнения тестовыми данными (`insert_data.sql`).
- `target/`: Скомпилированные файлы (создаются после сборки).

## Примечания
- Убедитесь, что сервер PostgreSQL работает перед запуском приложения.
- Бинарный файл приложения доступен на Google Drive: [ссылка](https://drive.google.com/file/d/ваш_id_файла/view?usp=sharing).
- Для проверки бизнес-правил (например, стаж председателя > 7 лет) реализованы триггеры в базе данных (см. `sql/create_tables.sql`).